<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Postcard demo</title>
        <meta name="description" content="Demo of new postcard shape">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="postcard.css">
        <link rel="stylesheet" href="shutup.css">
    </head>
    <body>
      <section class="explain">
        <hgroup>
          <h1>"Shut up JP"</h1>
        </hgroup>

        <p>One day, after months of silence, my friend <a href="">Claire</a> sent me a text message with only 3 words in it &ldquo;<strong>Shut up, JP.</strong>&rdquo; Not long afterwards I started receiving this advice by mail as well, from every country she visited and in every language she could convince friendly, and presumably confused, strangers to help her write in.</p>
      </section>

      <figure>
        <div class="postcard right-hand portrait" style="--postcard: url('seattle.webp'); --aspect-ratio: 1376 / 1931"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard book" style="--postcard: url('sri-lanka.webp'); --aspect-ratio: 2286 / 1647;"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard left-hand portrait" style="--postcard: url('morocco.webp'); --aspect-ratio: 1575 / 2224"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard right-hand portrait" style="--postcard: url('seattle.webp'); --aspect-ratio: 1376 / 1931"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard book" style="--postcard: url('sri-lanka.webp'); --aspect-ratio: 2286 / 1647;"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard left-hand portrait" style="--postcard: url('morocco.webp'); --aspect-ratio: 1575 / 2224"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard right-hand portrait" style="--postcard: url('seattle.webp'); --aspect-ratio: 1376 / 1931"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard book" style="--postcard: url('sri-lanka.webp'); --aspect-ratio: 2286 / 1647;"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>
      <figure>
        <div class="postcard left-hand portrait" style="--postcard: url('morocco.webp'); --aspect-ratio: 1575 / 2224"></div>
        <figcaption>This is some text about this postcard. It is not a lot of ytext, but it is also not nothing.</figcaption>
      </figure>

      <section class="explain">How fun is this??</section>
      

      <script>
        const debounce = (fn) => {
          let frame;
          return (...params) => {
            if (frame) { 
              cancelAnimationFrame(frame);
            }
            frame = requestAnimationFrame(() => {
              fn(...params);
            });
          } 
        };

        const storeScroll = () => {
          document.documentElement.style.setProperty('--scroll', window.scrollY);
        }
        document.addEventListener('scroll', debounce(storeScroll), { passive: true });
        storeScroll();

        const setYPos = () => {
          document.documentElement.style.setProperty('--viewportY', Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0));
          Array.from(document.getElementsByClassName('postcard')).forEach((pc) => {
            pc.style.setProperty('--yPos',
              window.scrollY + pc.getBoundingClientRect().top + pc.getBoundingClientRect().height / 2
            );
          })
        }
        window.addEventListener('resize', debounce(setYPos));
        setYPos();
        
      </script>
    </body>
</html>